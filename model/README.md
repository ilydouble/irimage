# Model Directory - çƒ­åŠ›å›¾ICASåˆ†ç±»æ¨¡å‹å·¥å…·é›†

## ğŸ“‹ ç›®å½•æ¦‚è§ˆ

æœ¬ç›®å½•åŒ…å«äº†å®Œæ•´çš„çƒ­åŠ›å›¾ICASåˆ†ç±»æ¨¡å‹è®­ç»ƒã€åˆ†æå’Œé¢„æµ‹å·¥å…·é“¾ï¼Œæ¶µç›–ä»ä¼ ç»Ÿæœºå™¨å­¦ä¹ åˆ°æ·±åº¦å­¦ä¹ çš„å¤šç§æ–¹æ³•ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ğŸ§  æ¨¡å‹è®­ç»ƒè„šæœ¬

| è„šæœ¬åç§° | æŠ€æœ¯æ ˆ | ä¸»è¦ç‰¹ç‚¹ | æ¨èåœºæ™¯ |
|---------|--------|----------|----------|
| **train_cnn_classifier.py** | æ·±åº¦å­¦ä¹ CNN | ResNet/EfficientNet + Focal Loss | æ ‡å‡†æ·±åº¦å­¦ä¹ åˆ†ç±» |
| **train_feature_ml_classifier.py** | ä¼ ç»Ÿæœºå™¨å­¦ä¹  | æ‰‹å·¥ç‰¹å¾ + å¤šç§MLç®—æ³• | ç‰¹å¾å·¥ç¨‹ç ”ç©¶ |
| **train_multimodal_classifier.py** | å¤šæ¨¡æ€èåˆ | å›¾åƒç‰¹å¾ + ä¸´åºŠæ•°æ® | ä¸´åºŠåº”ç”¨åœºæ™¯ |
| **train_contrastive_classifier.py** | å¯¹æ¯”å­¦ä¹  | ä¸¤é˜¶æ®µè®­ç»ƒï¼šå¯¹æ¯”å­¦ä¹  + åˆ†ç±» | æ•°æ®ç¨€ç¼ºåœºæ™¯ |
| **train_contrastive_mask_classifier.py** | å¯¹æ¯”å­¦ä¹  + Mask | æ™ºèƒ½äººè„¸Mask + Attention | é«˜ç²¾åº¦è¦æ±‚ |
| **train_contrastive_split_classifier.py** | å¯¹æ¯”å­¦ä¹  + åˆ†å‰² | æ”¹è¿›æ•°æ®é›†åˆ†å‰²ç­–ç•¥ | å®éªŒå¯¹æ¯” |

### 2. ğŸ” æ¨¡å‹åˆ†æè„šæœ¬

| è„šæœ¬åç§° | åŠŸèƒ½ | è¾“å‡º | ç”¨é€” |
|---------|------|------|------|
| **interpretability_analysis.py** | Grad-CAMå¯è§£é‡Šæ€§åˆ†æ | çƒ­åŠ›å›¾ã€å åŠ å›¾åƒ | ç†è§£æ¨¡å‹å†³ç­– |
| **run_interpretability_analysis.py** | å¯è§£é‡Šæ€§åˆ†æè¿è¡Œå™¨ | æ‰¹é‡åˆ†æç»“æœ | å¿«é€Ÿåˆ†æå·¥å…· |
| **comprehensive_feature_analysis.py** | å…¨é¢ç‰¹å¾é‡è¦æ€§ç»Ÿè®¡ | ç»Ÿè®¡æŠ¥å‘Šã€å¯è§†åŒ– | æ·±åº¦åˆ†æ |

### 3. ğŸ¯ æ¨¡å‹é¢„æµ‹è„šæœ¬

| è„šæœ¬åç§° | åŠŸèƒ½ | è¾“å…¥ | è¾“å‡º |
|---------|------|------|------|
| **predict_yolo11.py** | YOLOv11äººè„¸æ£€æµ‹é¢„æµ‹ | çƒ­åŠ›å›¾åƒ | æ£€æµ‹æ¡†ã€åˆ†å‰²æ©ç  |

### 4. ğŸ¤ è¯­éŸ³å¤„ç†è„šæœ¬

| è„šæœ¬åç§° | åŠŸèƒ½ | ç‰¹ç‚¹ | ç”¨é€” |
|---------|------|------|------|
| **voice_asr.py** | é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ« | æ”¯æŒOSS/æœ¬åœ°æ–‡ä»¶ | è¯­éŸ³æ•°æ®å¤„ç† |
| **extract_asr_simple.py** | ASRç»“æœæå– | äº¤äº’å¼ç•Œé¢ | ç»“æœæ•´ç† |

### 5. ğŸ› ï¸ è¾…åŠ©å·¥å…·è„šæœ¬

| è„šæœ¬åç§° | åŠŸèƒ½ | ç”¨é€” |
|---------|------|------|
| **train_yolo11.py** | YOLOv11æ¨¡å‹è®­ç»ƒ | äººè„¸æ£€æµ‹æ¨¡å‹è®­ç»ƒ |
| **verify_mask_consistency.py** | Maskä¸€è‡´æ€§éªŒè¯ | è°ƒè¯•å·¥å…· |
| **visualize_smart_mask.py** | æ™ºèƒ½Maskå¯è§†åŒ– | æ•ˆæœå±•ç¤º |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…åŸºç¡€ä¾èµ–
pip install torch torchvision torchaudio
pip install opencv-python matplotlib seaborn
pip install scikit-learn pandas numpy
pip install ultralytics  # YOLOv11
```

### æ¨¡å‹è®­ç»ƒ

#### 1. æ·±åº¦å­¦ä¹ CNNåˆ†ç±»å™¨ (æ¨è)

```bash
python model/train_cnn_classifier.py
```

**ç‰¹ç‚¹ï¼š**
- æ”¯æŒResNet18/34/50å’ŒEfficientNet B0-B3
- é›†æˆFocal Losså¤„ç†ç±»åˆ«ä¸å¹³è¡¡
- è‡ªåŠ¨æ—©åœå’Œæ¨¡å‹ä¿å­˜
- å®Œæ•´çš„è®­ç»ƒå¯è§†åŒ–

#### 2. å¯¹æ¯”å­¦ä¹ åˆ†ç±»å™¨ (é«˜ç²¾åº¦)

```bash
python model/train_contrastive_classifier.py
```

**ç‰¹ç‚¹ï¼š**
- ä¸¤é˜¶æ®µè®­ç»ƒï¼šå¯¹æ¯”å­¦ä¹ é¢„è®­ç»ƒ + åˆ†ç±»å¾®è°ƒ
- æ”¯æŒä¸å¯¹ç§°åˆ†æï¼ˆå·¦å³è„¸åˆ†åˆ«å¤„ç†ï¼‰
- é€‚åˆå°æ ·æœ¬å­¦ä¹ 

#### 3. å¤šæ¨¡æ€èåˆåˆ†ç±»å™¨ (ä¸´åºŠåº”ç”¨)

```bash
python model/train_multimodal_classifier.py
```

**ç‰¹ç‚¹ï¼š**
- ç»“åˆå›¾åƒç‰¹å¾å’Œä¸´åºŠæ•°æ®
- ä»æ•°æ®åº“è‡ªåŠ¨æå–æ‚£è€…ä¿¡æ¯
- é€‚åˆå®é™…ä¸´åºŠéƒ¨ç½²

#### 4. ä¼ ç»Ÿæœºå™¨å­¦ä¹ åˆ†ç±»å™¨ (ç‰¹å¾ç ”ç©¶)

```bash
python model/train_feature_ml_classifier.py
```

**ç‰¹ç‚¹ï¼š**
- æ‰‹å·¥ç‰¹å¾æå–ï¼ˆçº¹ç†ã€å½¢çŠ¶ã€ç»Ÿè®¡ç‰¹å¾ï¼‰
- å¤šç§MLç®—æ³•å¯¹æ¯”ï¼ˆRFã€SVMã€XGBoostç­‰ï¼‰
- ç‰¹å¾é‡è¦æ€§åˆ†æ

### æ¨¡å‹åˆ†æ

#### 1. å¿«é€Ÿå¯è§£é‡Šæ€§åˆ†æ

```bash
python model/run_interpretability_analysis.py
```

**åŠŸèƒ½ï¼š**
- è‡ªåŠ¨æŸ¥æ‰¾æœ€æ–°è®­ç»ƒçš„æ¨¡å‹
- ç”ŸæˆGrad-CAMçƒ­åŠ›å›¾
- æ‰¹é‡åˆ†æå¤šå¼ å›¾åƒ
- äº¤äº’å¼æ“ä½œç•Œé¢

#### 2. å…¨é¢ç‰¹å¾é‡è¦æ€§åˆ†æ

```bash
python model/comprehensive_feature_analysis.py
```

**åŠŸèƒ½ï¼š**
- ç»Ÿè®¡æ‰€æœ‰å›¾åƒçš„ç‰¹å¾é‡è¦æ€§
- å±‚çº§é‡è¦æ€§æ’å
- ç±»åˆ«å·®å¼‚åˆ†æ
- ä½ç½®æ¨¡å¼ç»Ÿè®¡

### æ¨¡å‹é¢„æµ‹

#### 1. YOLOv11äººè„¸æ£€æµ‹

```bash
python model/predict_yolo11.py
```

**é…ç½®æ–‡ä»¶ï¼š** ä¿®æ”¹è„šæœ¬ä¸­çš„configå­—å…¸
```python
config = {
    'model_path': 'path/to/your/model.pt',
    'source_dir': 'path/to/images',
    'output_dir': 'path/to/output'
}
```

### è¯­éŸ³å¤„ç†

#### 1. è¯­éŸ³è¯†åˆ«

```bash
python model/voice_asr.py
```

**æ”¯æŒæ¨¡å¼ï¼š**
- OSSæ–‡ä»¶è¯†åˆ«
- æœ¬åœ°æ–‡ä»¶è¯†åˆ«ï¼ˆè‡ªåŠ¨ä¸Šä¼ ï¼‰
- æ‰¹é‡ç›®å½•å¤„ç†

#### 2. ç»“æœæå–

```bash
python model/extract_asr_simple.py
```

## ğŸ“Š è®­ç»ƒç»“æœç›®å½•ç»“æ„

```
model/
â”œâ”€â”€ contrastive_thermal_classifier_results/    # å¯¹æ¯”å­¦ä¹ æ¨¡å‹ç»“æœ
â”‚   â””â”€â”€ run_YYYYMMDD_HHMMSS/
â”‚       â”œâ”€â”€ best_classifier.pth               # æœ€ä½³åˆ†ç±»å™¨
â”‚       â”œâ”€â”€ best_contrastive_encoder.pth      # æœ€ä½³ç¼–ç å™¨
â”‚       â”œâ”€â”€ training_history.json             # è®­ç»ƒå†å²
â”‚       â””â”€â”€ config.json                       # è®­ç»ƒé…ç½®
â”œâ”€â”€ cnn_thermal_classifier_results/           # CNNæ¨¡å‹ç»“æœ
â”œâ”€â”€ multimodal_thermal_classifier_results/    # å¤šæ¨¡æ€æ¨¡å‹ç»“æœ
â””â”€â”€ feature_ml_classifier_results/            # ä¼ ç»ŸMLç»“æœ
```

## ğŸ”¬ åˆ†æç»“æœç›®å½•ç»“æ„

```
dataset/datasets/
â”œâ”€â”€ interpretability_analysis/                # å¯è§£é‡Šæ€§åˆ†æç»“æœ
â”‚   â”œâ”€â”€ gradcam_heatmaps/                     # Grad-CAMçƒ­åŠ›å›¾
â”‚   â”œâ”€â”€ overlay_images/                       # å åŠ å¯è§†åŒ–
â”‚   â”œâ”€â”€ analysis_results.json                 # è¯¦ç»†ç»“æœ
â”‚   â””â”€â”€ summary_report.txt                    # æ±‡æ€»æŠ¥å‘Š
â”œâ”€â”€ feature_importance_analysis/              # ç‰¹å¾é‡è¦æ€§åˆ†æ
â”‚   â”œâ”€â”€ statistics/                           # ç»Ÿè®¡æ•°æ®
â”‚   â”œâ”€â”€ visualizations/                       # å¯è§†åŒ–å›¾è¡¨
â”‚   â””â”€â”€ comprehensive_analysis_report.txt     # ç»¼åˆæŠ¥å‘Š
â””â”€â”€ quick_analysis/                           # å¿«é€Ÿåˆ†æç»“æœ
```

## âš™ï¸ é…ç½®è¯´æ˜

### æ•°æ®è·¯å¾„é…ç½®

å¤§å¤šæ•°è„šæœ¬ä½¿ç”¨ä»¥ä¸‹é»˜è®¤è·¯å¾„ï¼š
- **è®­ç»ƒæ•°æ®ï¼š** `./dataset/datasets/thermal_classification_cropped`
- **æ•°æ®åº“ï¼š** `./web/database/patientcare.db`
- **è¾“å‡ºç›®å½•ï¼š** `./model/{script_name}_results`

### æ¨¡å‹å‚æ•°é…ç½®

æ¯ä¸ªè®­ç»ƒè„šæœ¬éƒ½æœ‰å†…ç½®çš„é…ç½®å­—å…¸ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹ï¼š

```python
# ç¤ºä¾‹ï¼šCNNåˆ†ç±»å™¨é…ç½®
config = {
    'model_name': 'resnet18',
    'batch_size': 32,
    'learning_rate': 0.001,
    'num_epochs': 100,
    'patience': 15
}
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **CUDAå†…å­˜ä¸è¶³**
   ```bash
   # å‡å°batch_size
   config['batch_size'] = 16  # æˆ–æ›´å°
   ```

2. **æ¨¡å‹æ–‡ä»¶æœªæ‰¾åˆ°**
   ```bash
   # æ£€æŸ¥æ¨¡å‹è·¯å¾„
   ls model/contrastive_thermal_classifier_results/
   ```

3. **æ•°æ®é›†è·¯å¾„é”™è¯¯**
   ```bash
   # ç¡®è®¤æ•°æ®é›†å­˜åœ¨
   ls dataset/datasets/thermal_classification_cropped/
   ```

### è°ƒè¯•å·¥å…·

- **Maskä¸€è‡´æ€§éªŒè¯ï¼š** `python model/verify_mask_consistency.py`
- **Maskæ•ˆæœå¯è§†åŒ–ï¼š** `python model/visualize_smart_mask.py`

## ğŸ“š æŠ€æœ¯æ–‡æ¡£

### æ ¸å¿ƒæŠ€æœ¯

1. **Focal Lossï¼š** å¤„ç†ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜
2. **å¯¹æ¯”å­¦ä¹ ï¼š** æé«˜ç‰¹å¾è¡¨ç¤ºè´¨é‡
3. **Grad-CAMï¼š** æ¨¡å‹å¯è§£é‡Šæ€§åˆ†æ
4. **æ™ºèƒ½Maskï¼š** åŸºäºå†…å®¹çš„äººè„¸åŒºåŸŸæ£€æµ‹
5. **å¤šæ¨¡æ€èåˆï¼š** å›¾åƒ+ä¸´åºŠæ•°æ®ç»“åˆ

### æ¨¡å‹æ¶æ„

- **CNNéª¨å¹²ç½‘ç»œï¼š** ResNetã€EfficientNet
- **å¯¹æ¯”å­¦ä¹ ç¼–ç å™¨ï¼š** åŸºäºResNetçš„Siameseç½‘ç»œ
- **æ³¨æ„åŠ›æœºåˆ¶ï¼š** è‡ªé€‚åº”ç‰¹å¾åŠ æƒ
- **å¤šæ¨¡æ€èåˆï¼š** ç‰¹å¾çº§å’Œå†³ç­–çº§èåˆ

## ğŸ”„ å·¥ä½œæµç¨‹å»ºè®®

### 1. æ–°æ‰‹å…¥é—¨æµç¨‹
```bash
# 1. è®­ç»ƒåŸºç¡€CNNæ¨¡å‹
python model/train_cnn_classifier.py

# 2. åˆ†ææ¨¡å‹å¯è§£é‡Šæ€§
python model/run_interpretability_analysis.py

# 3. æŸ¥çœ‹åˆ†æç»“æœ
ls dataset/datasets/interpretability_analysis/
```

### 2. é«˜çº§ç ”ç©¶æµç¨‹
```bash
# 1. å¯¹æ¯”å­¦ä¹ é¢„è®­ç»ƒ
python model/train_contrastive_classifier.py

# 2. å…¨é¢ç‰¹å¾åˆ†æ
python model/comprehensive_feature_analysis.py

# 3. å¤šæ¨¡æ€èåˆ
python model/train_multimodal_classifier.py
```

### 3. ç”Ÿäº§éƒ¨ç½²æµç¨‹
```bash
# 1. è®­ç»ƒæœ€ä½³æ¨¡å‹
python model/train_contrastive_mask_classifier.py

# 2. æ¨¡å‹éªŒè¯
python model/run_interpretability_analysis.py

# 3. æ€§èƒ½è¯„ä¼°
python model/comprehensive_feature_analysis.py
```

## ğŸ“ å¤‡ä»½å’Œå†å²æ–‡ä»¶

### backup_original_classifiers/ ç›®å½•
åŒ…å«äº†åŸå§‹è®­ç»ƒè„šæœ¬çš„å¤‡ä»½ç‰ˆæœ¬ï¼š
- `train_thermal_classifier.py` â†’ `train_cnn_classifier.py`
- `train_thermal_classifier1.py` â†’ `train_feature_ml_classifier.py`
- `train_thermal_classifier2.py` â†’ `train_multimodal_classifier.py`
- `train_thermal_classifier3.py` â†’ `train_contrastive_classifier.py`
- `train_thermal_classifier4.py` â†’ `train_contrastive_mask_classifier.py`
- `train_thermal_classifier5.py` â†’ `train_contrastive_split_classifier.py`

### docs/ ç›®å½•
åŒ…å«è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£ï¼š
- **comprehensive_analysis_README.md** - å…¨é¢ç‰¹å¾é‡è¦æ€§åˆ†æå·¥å…·æ–‡æ¡£
- **interpretability_analysis_README.md** - å¯è§£é‡Šæ€§åˆ†æå·¥å…·æ–‡æ¡£
- **mask_consistency_fix.md** - Maskä¸€è‡´æ€§ä¿®å¤æŠ€æœ¯æ–‡æ¡£
- **multimodal_features_documentation.md** - å¤šæ¨¡æ€ç‰¹å¾è¯¦ç»†è¯´æ˜
- **smart_mask_summary.md** - æ™ºèƒ½MaskåŠŸèƒ½æŠ€æœ¯æ€»ç»“
- **thermal_classification_methods_report.md** - åˆ†ç±»æ–¹æ³•å¯¹æ¯”æŠ¥å‘Š

## ğŸ” è„šæœ¬åŠŸèƒ½è¯¦ç»†è¯´æ˜

### è®­ç»ƒè„šæœ¬è¯¦ç»†å¯¹æ¯”

#### 1. train_cnn_classifier.py - æ·±åº¦å­¦ä¹ CNNåˆ†ç±»å™¨
**æŠ€æœ¯æ ˆï¼š** PyTorch + ResNet/EfficientNet + Focal Loss
**ç‰¹ç‚¹ï¼š**
- æ”¯æŒ6ç§é¢„è®­ç»ƒæ¨¡å‹ï¼ˆResNet18/34/50, EfficientNet B0-B3ï¼‰
- é›†æˆFocal Losså¤„ç†ç±»åˆ«ä¸å¹³è¡¡
- è‡ªåŠ¨æ—©åœæœºåˆ¶ï¼ˆpatience=15ï¼‰
- å®Œæ•´çš„è®­ç»ƒå¯è§†åŒ–å’ŒæŒ‡æ ‡è®°å½•
- æ”¯æŒCUDAå’ŒMPSï¼ˆApple Siliconï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** æ ‡å‡†æ·±åº¦å­¦ä¹ åˆ†ç±»ä»»åŠ¡ï¼Œä½œä¸ºåŸºçº¿æ¨¡å‹

#### 2. train_feature_ml_classifier.py - ä¼ ç»Ÿæœºå™¨å­¦ä¹ åˆ†ç±»å™¨
**æŠ€æœ¯æ ˆï¼š** OpenCV + scikit-learn + æ‰‹å·¥ç‰¹å¾å·¥ç¨‹
**ç‰¹ç‚¹ï¼š**
- 26ç»´æ‰‹å·¥ç‰¹å¾ï¼ˆæ¸©åº¦ã€çº¹ç†ã€å½¢çŠ¶ã€ç»Ÿè®¡ç‰¹å¾ï¼‰
- 8ç§MLç®—æ³•å¯¹æ¯”ï¼ˆRFã€SVMã€XGBoostã€LightGBMç­‰ï¼‰
- Focal LossåŒ…è£…å™¨å¤„ç†ç±»åˆ«ä¸å¹³è¡¡
- ç‰¹å¾é‡è¦æ€§åˆ†æå’Œå¯è§†åŒ–
- è®­ç»ƒé€Ÿåº¦å¿«ï¼ˆçº¦30ç§’ï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** ç‰¹å¾å·¥ç¨‹ç ”ç©¶ã€å¿«é€ŸåŸå‹éªŒè¯ã€å¯è§£é‡Šæ€§è¦æ±‚é«˜

#### 3. train_multimodal_classifier.py - å¤šæ¨¡æ€èåˆåˆ†ç±»å™¨
**æŠ€æœ¯æ ˆï¼š** å›¾åƒç‰¹å¾ + ä¸´åºŠæ•°æ® + æœºå™¨å­¦ä¹ 
**ç‰¹ç‚¹ï¼š**
- 324ç»´å›¾åƒç‰¹å¾ + 13ç»´ä¸´åºŠç‰¹å¾
- è‡ªåŠ¨ä»æ•°æ®åº“æå–æ‚£è€…ä¸´åºŠä¿¡æ¯
- ç‰¹å¾çº§èåˆç­–ç•¥
- æœ€ä½³æ€§èƒ½ï¼ˆ74.83%å‡†ç¡®ç‡ï¼‰
- é€‚åˆå®é™…ä¸´åºŠéƒ¨ç½²

**é€‚ç”¨åœºæ™¯ï¼š** ä¸´åºŠåº”ç”¨ã€å¤šæ¨¡æ€æ•°æ®èåˆç ”ç©¶

#### 4. train_contrastive_classifier.py - å¯¹æ¯”å­¦ä¹ åˆ†ç±»å™¨
**æŠ€æœ¯æ ˆï¼š** å¯¹æ¯”å­¦ä¹  + ä¸¤é˜¶æ®µè®­ç»ƒ
**ç‰¹ç‚¹ï¼š**
- ä¸¤é˜¶æ®µè®­ç»ƒï¼šå¯¹æ¯”å­¦ä¹ é¢„è®­ç»ƒ + åˆ†ç±»å¾®è°ƒ
- æ”¯æŒä¸å¯¹ç§°åˆ†æï¼ˆå·¦å³è„¸åˆ†åˆ«å¤„ç†ï¼‰
- è‡ªç›‘ç£å­¦ä¹ ï¼Œé€‚åˆå°æ ·æœ¬åœºæ™¯
- å¼ºæ³›åŒ–èƒ½åŠ›

**é€‚ç”¨åœºæ™¯ï¼š** æ•°æ®ç¨€ç¼ºã€éœ€è¦å¼ºæ³›åŒ–èƒ½åŠ›çš„åœºæ™¯

#### 5. train_contrastive_mask_classifier.py - å¯¹æ¯”å­¦ä¹ +Maskåˆ†ç±»å™¨
**æŠ€æœ¯æ ˆï¼š** å¯¹æ¯”å­¦ä¹  + æ™ºèƒ½äººè„¸Mask + Attentionæœºåˆ¶
**ç‰¹ç‚¹ï¼š**
- æ™ºèƒ½äººè„¸Maskï¼ˆåŸºäºå†…å®¹æ£€æµ‹ï¼‰
- ç©ºé—´Attentionæœºåˆ¶
- åŒé‡ç­–ç•¥ï¼šé¢„å¤„ç†Mask + è¿è¡Œæ—¶Attention
- æœ€é«˜å¯è§£é‡Šæ€§

**é€‚ç”¨åœºæ™¯ï¼š** é«˜ç²¾åº¦è¦æ±‚ã€éœ€è¦å¯è§£é‡Šæ€§çš„ç ”ç©¶

#### 6. train_contrastive_split_classifier.py - å¯¹æ¯”å­¦ä¹ +æ•°æ®åˆ†å‰²åˆ†ç±»å™¨
**æŠ€æœ¯æ ˆï¼š** å¯¹æ¯”å­¦ä¹  + æ”¹è¿›æ•°æ®åˆ†å‰²ç­–ç•¥
**ç‰¹ç‚¹ï¼š**
- æ”¹è¿›çš„æ•°æ®é›†åˆ†å‰²ç­–ç•¥
- ç¡®ä¿å®éªŒå¯é‡å¤æ€§
- ç²¾ç¡®çš„æ•°æ®æ§åˆ¶

**é€‚ç”¨åœºæ™¯ï¼š** ç§‘ç ”å®éªŒã€æ–¹æ³•å¯¹æ¯”ç ”ç©¶

### åˆ†æè„šæœ¬è¯¦ç»†è¯´æ˜

#### 1. interpretability_analysis.py - æ ¸å¿ƒå¯è§£é‡Šæ€§åˆ†æå¼•æ“
**åŠŸèƒ½ï¼š**
- Grad-CAMç®—æ³•å®ç°
- å¤šå±‚ç‰¹å¾å¯è§†åŒ–ï¼ˆlayer1-layer4ï¼‰
- çƒ­åŠ›å›¾ç”Ÿæˆå’Œå åŠ å¯è§†åŒ–
- ç‰¹å¾ç»Ÿè®¡è®¡ç®—ï¼ˆæ¿€æ´»å¼ºåº¦ã€é‡å¿ƒç­‰ï¼‰
- æ”¯æŒ6é€šé“å’Œ3é€šé“æ¨¡å¼è‡ªåŠ¨æ£€æµ‹

#### 2. run_interpretability_analysis.py - å¯è§£é‡Šæ€§åˆ†æè¿è¡Œå™¨
**åŠŸèƒ½ï¼š**
- è‡ªåŠ¨æŸ¥æ‰¾æœ€æ–°è®­ç»ƒæ¨¡å‹
- æ™ºèƒ½æ¨¡å‹æ¨¡å¼æ£€æµ‹ï¼ˆ6é€šé“/3é€šé“ï¼‰
- äº¤äº’å¼å’Œè‡ªå®šä¹‰åˆ†ææ¨¡å¼
- æ‰¹é‡å›¾åƒå¤„ç†
- ç»“æœæ±‡æ€»å’ŒæŠ¥å‘Šç”Ÿæˆ

#### 3. comprehensive_feature_analysis.py - å…¨é¢ç‰¹å¾é‡è¦æ€§ç»Ÿè®¡
**åŠŸèƒ½ï¼š**
- ç»Ÿè®¡æ‰€æœ‰å›¾åƒçš„Grad-CAMç»“æœ
- å±‚çº§é‡è¦æ€§æ’ååˆ†æ
- ç±»åˆ«å·®å¼‚ç»Ÿè®¡æ£€éªŒ
- ä½ç½®æ¨¡å¼èšç±»åˆ†æ
- é¢„æµ‹æ€§èƒ½å…³è”åˆ†æ
- é™åˆ¶åˆ†æå›¾åƒæ•°é‡ï¼ˆæœ€å¤š200å¼ ï¼Œé¿å…è¿‡é•¿æ—¶é—´ï¼‰

### è¾…åŠ©å·¥å…·è¯¦ç»†è¯´æ˜

#### 1. voice_asr.py - é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«
**åŠŸèƒ½ï¼š**
- æ”¯æŒOSSæ–‡ä»¶è¯†åˆ«
- æœ¬åœ°æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ è¯†åˆ«
- æ‰¹é‡ç›®å½•å¤„ç†
- æ™ºèƒ½åˆ†è½¨å’Œè‡ªé€‚åº”é‡‡æ ·ç‡
- ç»“æœä¿å­˜ä¸ºJSONå’ŒTXTæ ¼å¼

#### 2. extract_asr_simple.py - ASRç»“æœæå–å·¥å…·
**åŠŸèƒ½ï¼š**
- äº¤äº’å¼æ–‡ä»¶æœç´¢å’Œæå–
- è‡ªåŠ¨è¯†åˆ«ASRç»“æœæ–‡ä»¶
- æŒ‰ç±»å‹ç»„ç»‡è¾“å‡ºï¼ˆjson_results/, txt_reports/ï¼‰
- ç”Ÿæˆå¤„ç†æ‘˜è¦

#### 3. predict_yolo11.py - YOLOv11é¢„æµ‹å·¥å…·
**åŠŸèƒ½ï¼š**
- æ‰¹é‡å›¾åƒäººè„¸æ£€æµ‹
- æ”¯æŒæ£€æµ‹æ¡†å’Œåˆ†å‰²æ©ç è¾“å‡º
- ç»“æœè‡ªåŠ¨ç»„ç»‡å’Œä¿å­˜
- å¯é…ç½®ç½®ä¿¡åº¦é˜ˆå€¼

#### 4. face_detect.py - MediaPipeäººè„¸æ£€æµ‹
**åŠŸèƒ½ï¼š**
- äººè„¸å…³é”®ç‚¹æ£€æµ‹ï¼ˆ468ä¸ªlandmarkï¼‰
- é¢éƒ¨åŒºåŸŸåˆ†æï¼ˆå·¦çœ¼ã€å³çœ¼ã€é¼»å­ã€å˜´å·´ç­‰ï¼‰
- GLCMçº¹ç†ç‰¹å¾æå–
- æ£€æµ‹æ¡†å¯è§†åŒ–

#### 5. seg_all.py - SAMå›¾åƒåˆ†å‰²
**åŠŸèƒ½ï¼š**
- åŸºäºSAMæ¨¡å‹çš„å›¾åƒåˆ†å‰²
- å¤šç‚¹æç¤ºåˆ†å‰²
- æ©ç ä¼˜åŒ–å’Œåå¤„ç†
- æ‰¹é‡å›¾åƒå¤„ç†

#### 6. verify_mask_consistency.py - Maskä¸€è‡´æ€§éªŒè¯
**åŠŸèƒ½ï¼š**
- éªŒè¯è®­ç»ƒè„šæœ¬ä¸­maskä½¿ç”¨çš„ä¸€è‡´æ€§
- æ£€æŸ¥å¯¹æ¯”å­¦ä¹ å’Œåˆ†ç±»é˜¶æ®µçš„maské€»è¾‘
- ä»£ç è´¨é‡æ£€æŸ¥å’Œå»ºè®®

#### 7. visualize_smart_mask.py - æ™ºèƒ½Maskå¯è§†åŒ–
**åŠŸèƒ½ï¼š**
- å¯è§†åŒ–ä¸åŒmaskæ–¹æ³•çš„æ•ˆæœ
- å¯¹æ¯”æ™ºèƒ½æ£€æµ‹ã€æ¤­åœ†ã€çŸ©å½¢ã€è‡ªé€‚åº”mask
- æ•ˆæœå±•ç¤ºå’Œè°ƒè¯•

## ğŸ¯ ä½¿ç”¨å»ºè®®å’Œæœ€ä½³å®è·µ

### æ–°æ‰‹å…¥é—¨å»ºè®®
1. **ä»CNNåˆ†ç±»å™¨å¼€å§‹**ï¼š`train_cnn_classifier.py`æä¾›ç¨³å®šçš„åŸºçº¿
2. **ç†è§£å¯è§£é‡Šæ€§**ï¼šä½¿ç”¨`run_interpretability_analysis.py`æŸ¥çœ‹æ¨¡å‹å…³æ³¨åŒºåŸŸ
3. **å¯¹æ¯”ä¸åŒæ–¹æ³•**ï¼šå°è¯•ä¼ ç»ŸMLæ–¹æ³•äº†è§£ç‰¹å¾é‡è¦æ€§

### ç ”ç©¶äººå‘˜å»ºè®®
1. **å¯¹æ¯”å­¦ä¹ æ¢ç´¢**ï¼šä½¿ç”¨`train_contrastive_classifier.py`æ¢ç´¢è‡ªç›‘ç£å­¦ä¹ 
2. **å¤šæ¨¡æ€èåˆ**ï¼šç»“åˆä¸´åºŠæ•°æ®æå‡æ€§èƒ½
3. **æ·±åº¦åˆ†æ**ï¼šä½¿ç”¨`comprehensive_feature_analysis.py`è¿›è¡Œå…¨é¢åˆ†æ

### ä¸´åºŠåº”ç”¨å»ºè®®
1. **å¤šæ¨¡æ€éƒ¨ç½²**ï¼š`train_multimodal_classifier.py`æœ€é€‚åˆä¸´åºŠç¯å¢ƒ
2. **å¯è§£é‡Šæ€§è¦æ±‚**ï¼šä½¿ç”¨maskå’Œattentionæœºåˆ¶æä¾›å†³ç­–è§£é‡Š
3. **æ€§èƒ½ç›‘æ§**ï¼šå®šæœŸä½¿ç”¨åˆ†æå·¥å…·éªŒè¯æ¨¡å‹æ€§èƒ½

---

**æ³¨æ„ï¼š** è¿è¡Œè„šæœ¬å‰è¯·ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œå¹¶ä¸”å·²æ­£ç¡®é…ç½®æ•°æ®è·¯å¾„å’Œæ¨¡å‹å‚æ•°ã€‚è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£è¯·å‚è€ƒdocs/ç›®å½•ä¸‹çš„ç›¸å…³æ–‡ä»¶ã€‚
